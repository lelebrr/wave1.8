[platformio]

[env:wavepwn_final]
platform = espressif32@6.9.0
board = esp32-s3-devkitc-1
framework = arduino

; === FORÇA 16MB FLASH + 16MB PSRAM OCTAL (PLACA WAVE) ===
board_build.mcu = esp32s3
board_build.variant = esp32s3
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.psram = enabled
board_build.psram_type = octal
board_build.partitions = huge_app.csv
board_upload.flash_size = 16MB
board_upload.maximum_size = 16777216
board_build.arduino.memory_type = qio_opi

; === EMBED DOS ARQUIVOS WEB (TODOS OS QUE EXISTEM) ===
board_build.embed_files = 
	data/web/index.html
	data/web/config.html
	data/web/style.css
	data/web/config.js
	data/web/chart.min.js
	data/web/bootstrap.min.css
	data/web/bootstrap.min.js
	data/web/favicon.ico
	ota/update.html

monitor_speed = 115200
upload_speed = 921600

; === BIBLIOTECAS 100% LOCAIS (DA SUA PASTA lib/) ===
lib_deps = 
	lib/GFX_Library_for_Arduino
	lib/MyLibrary
	lib/SensorLib
	lib/ESP32_IO_Expander
	lib/01_AXP2101
	lib/02_PCF85063
	lib/03_QMI8658
	lib/04_SD_MMC
	lib/05_LVGL_WITH_RAM
	lib/06_I2SCodec
	lib/ui_a
	lib/ui_b
	lib/ui_c

; === BIBLIOTECAS EXTERNAS (TODAS CORRIGIDAS E QUE FUNCIONAM NO WINDOWS) ===
	bblanchon/ArduinoJson@^6.21.5
	ESP32Async/AsyncTCP@^3.3.2
	ESP32Async/ESPAsyncWebServer@^3.6.0
	ESP32Async/ESPAsyncTCP@^2.0.0
	https://github.com/ESP32Async/AsyncTCPSock/archive/refs/tags/v1.0.3-dev.zip
	khoih-prog/AsyncTCP_RP2040W@^1.2.0
	vintlabs/FauxmoESP@^3.2.0
	arduino-libraries/NTPClient@^3.2.1
	links2004/WebSockets@^2.4.1

; === FLAGS DE COMPILAÇÃO (PERFEITAS PARA A PLACA WAVE) ===
build_flags = 
	-D LV_CONF_INCLUDE_SIMPLE
	-D LVGL_CONF_PATH="lib/05_LVGL_WITH_RAM/lv_conf.h"
	-D LOVYANGFX_LVGL
	-D BOARD_HAS_PSRAM
	-D ARDUINO_USB_MODE=1
	-D CONFIG_SPIRAM_USE_MALLOC
	-D CONFIG_SPIRAM_CACHE_WORKAROUND
	-D CORE_DEBUG_LEVEL=0
	-O2
	-I src
	-I lib